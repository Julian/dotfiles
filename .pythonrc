import os
import sys

# Enable Pretty Printing for stdout
def pprint_displayhook(value):
    import pprint

    if value is not None:
        try:
            import __builtin__
            __builtin__._ = value
        except ImportError:
            import builtins
            builtins._ = value

        pprint.pprint(value)

sys.displayhook = pprint_displayhook

# bpython + django
try:
     from django.core.management import setup_environ
     import settings
     setup_environ(settings)
except:
    pass

# If we're working with a Django project, set up the environment
if 'DJANGO_SETTINGS_MODULE' in os.environ:
    from django.db.models.loading import get_models
    from django.test.client import Client
    from django.test.utils import setup_test_environment, teardown_test_environment
    from django.conf import settings as S

    class DjangoModels(object):
        """Loop through all the models in INSTALLED_APPS and import them."""
        def __init__(self):
            for m in get_models():
                setattr(self, m.__name__, m)

    M = DjangoModels()
    C = Client()

del os
del sys
